<div class="nova_conta_view">
  <div class="janela_nova_conta">
    <div class="barra_azul">
      <img src="<%= asset_path('icone-windows.jpg') %>" alt="iconezinho windows">
      <%= ". Criar conta"%>
      <div class="botao-exit">
        <%= form_with url: destroy_user_session_path, method: :delete, local: true do %>
          <button type="submit">
            <span>X</span>
          </button>
        <% end %>
      </div>
    </div>

    <div class="nova_conta_data">
      <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
        <%= render "devise/shared/error_messages", resource: resource %>

        <!-- Campos comuns para todos os tipos de usuário -->
        <div class="field">
          <%= f.label :nome %><br />
          <%= f.text_field :nome, autofocus: true %>
        </div>

        <div class="field">
          <%= f.label :email %><br />
          <%= f.email_field :email, autocomplete: "email" %>
        </div>

        <div class="field">
          <%= f.label :cpf %><br />
          <%= f.text_field :cpf %>
        </div>

        <div class="field">
          <%= f.label :telefone %><br />
          <%= f.text_field :telefone %>
        </div>

        <div class="field">
          <%= f.label :endereco %><br />
          <%= f.text_field :endereco %>
        </div>

        <div class="field">
          <%= f.label :password %>
          <% if @minimum_password_length %>
          <em>(<%= @minimum_password_length %> caracteres no mínimo)</em>
          <% end %><br />
          <%= f.password_field :password, autocomplete: "new-password" %>
        </div>

        <div class="field">
          <%= f.label :password_confirmation %><br />
          <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
        </div>

       <!-- Radio buttons para selecionar Cliente ou Vendedor -->
        <div class="field">
          <%= f.label :role, "Tipo de Usuário" %><br />
          <%= f.radio_button :role, 'Cliente', id: 'role_cliente' %>
          <%= f.label :role, 'Cliente', for: 'role_cliente' %>
          <%= f.radio_button :role, 'Vendedor', id: 'role_vendedor' %>
          <%= f.label :role, 'Vendedor', for: 'role_vendedor' %>
        </div>

        <!-- Campos adicionais para Cliente e Vendedor -->
        <div id="cliente_fields" style="display: none;">
          <%= render partial: 'clientes/cliente_fields', locals: { f: f } %>
        </div>

       <div id="vendedor_fields" style="display: none;">
          <%= render partial: 'vendedors/vendedor_fields', locals: { f: f } %>
        </div>

        <div class="actions">
          <%= f.submit "Sign up" %>
        </div>
      <% end %>

      <%= render "devise/shared/links" %>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
  const clienteRadio = document.getElementById('role_cliente');
  const vendedorRadio = document.getElementById('role_vendedor');
  const clienteFields = document.getElementById('cliente_fields');
  const vendedorFields = document.getElementById('vendedor_fields');

  function toggleFields() {
    if (clienteRadio.checked) {
      clienteFields.style.display = 'block';
      vendedorFields.style.display = 'none';
    } else if (vendedorRadio.checked) {
      clienteFields.style.display = 'none';
      vendedorFields.style.display = 'block';
    }
  }

  clienteRadio.addEventListener('change', toggleFields);
  vendedorRadio.addEventListener('change', toggleFields);

  // Executa a função para verificar o campo selecionado ao carregar a página
  toggleFields();
});
</script>

<div class="footer">
  <div>
    <img src="<%= asset_path('windows-logo.png') %>" alt="logo windows">
  </div>
</div>
